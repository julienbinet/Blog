{% extends '::layout/baseAdmin.html.twig' %}

{% block page_content %}
    <h1>Liste des Utilisateurs</h1>

    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>Nom</th>
            <th>Email</th>
            <th>RÃ´le</th>
        </tr>
        </thead>
        <tbody>
        {% for user in users %}
            {% if "ROLE_ADMIN" not in user.roles %}
                <tr>
                    <td>{{ user.username }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                        {% for role in user.roles %}
                            {{ role }}  {% if not loop.last %} - {% endif %}
                        {% endfor %}
                        <form action="{{ path('admin_user_addrole') }}" method="POST">
                            <select name="new_role" id="">
                                <option
                                        {% if "ROLE_AUTHOR"  in user.roles %} selected="selected" {% endif %}
                                        value="ROLE_AUTHOR">Auteur</option>
                                <option
                                        {% if "ROLE_AUTHOR" not in user.roles %} selected="selected" {% endif %}
                                        value="ROLE_USER">Utilisateur</option>
                            </select>
                            <input type="hidden" value="{{ user.id }}" name="idUser">
                            <input type="submit" value="Modifier">
                        </form>
                    </td>
                </tr>
            {% endif %}
        {% endfor %}
        </tbody>
    </table>

{% endblock %}

