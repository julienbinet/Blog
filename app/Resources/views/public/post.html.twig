{% extends '::layout/base.html.twig' %}

{% block title %}{{ post.title }}{% endblock %}

{% block body %}

    <div class="container" id="post">
        <div class="row">

            <article class="col s12 l8 post-content">


                <header class="post-header">
                    <h1>{{ post.title }}</h1>
                    <img src="{{ asset(post.image.AssetPath)}}" class='responsive-img' alt="{{ post.image.name }}" >
                </header>

                <p>
                    {{ post.content|raw|nl2br }}
                </p>

                <p>Catégorie : <a href="{{ path('post_category',{"slug" : post.category.slug}) }}">{{ post.category.name }} </a></p>

                {% if post.tags|length > 0 %}
                    <p>Tags : {% for tag in post.tags %}{{ tag.name}}{% if not loop.last %}, {% endif %} {% endfor %}</p>
                {% endif %}

                <p>Créé le {{ post.created | date('d/m/Y') }} par {{ post.idUser.username }}</p>

                {{ form_start(form) }}

                {{ form_widget(form) }}
                <button type="submit" class="btn btn-round btn-success">Valider</button>
                {{ form_end(form) }}

                {% if comments|length > 0 %}

                    {% for comment in comments %}
                        {{ comment.username}}
                        {{ comment.content | raw | nl2br}}
                        <p>Ecrit le {{ comment.created | date('d/m/Y à h:m:s') }}</p>
                        {% if not loop.last %}<hr> {% endif %}
                    {% endfor %}

                {% else %}

                    <p>Aucun commentaire</p>

                {% endif %}

              


            </article>

            <div class="col s12 l3 offset-l1 sidebar">
                {{ render(controller('AppBundle:Default:sidebar')) }}
            </div>

        </div>
    </div>


{% endblock %}

